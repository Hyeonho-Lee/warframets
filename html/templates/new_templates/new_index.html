<!DOCTYPE html>
<html lang = "ko">
<html>
    <head>
        <meta charset = "UTF-8">
        <meta name="viewport" content="user-scalable=0, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, width=device-width" />
        <meta http-equiv="Cache-Control" content="no-cache">
        <meta http-equiv="Exprires" content="-1">
        <meta http-equiv="Pragma" content="no-cache">
        <title>Warframe Trade Status (모든 인기 아이템 통계) [테스트]</title>
        <!---------------------------------------------------------------------->
        <link rel="stylesheet" type = "text/css" href = "{{ url_for('static', filename = '/css/new_css/new_index.css', v = 0.1) }}" />
        <script src="{{ url_for('static', filename = '/js/new_js/new_index.js') }}" type="text/javascript"></script>
        <script src="{{ url_for('static', filename = 'js/AutoComplete.min.js') }}" type="text/javascript"></script>
        <script src="{{ url_for('static', filename = 'js/jquery-3.5.1.min.js') }}" type="text/javascript"></script>
        <script src="{{ url_for('static', filename = 'js/jquery-ui.js') }}" type="text/javascript"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    </head>
    <body>
        <script>
            window.onload = function () {
                get_today();
                
                var input = document.getElementById("item_name");
                input.addEventListener('click', function(){
                    var all_items = {{ all_item_kr | tojson }};
                    new AutoComplete(document.querySelector('#item_name'), all_items);
                });
            };
            
            function change_menu_button(button_value){
                var value = button_value;

                var menu_button_1 = document.getElementById("menu_button_1");
                var menu_button_2 = document.getElementById("menu_button_2");
                var menu_button_3 = document.getElementById("menu_button_3");
                var change_menu = document.getElementById("change_menu");

                if (value == 1) {
                    change_menu.innerHTML = "<div class='main_recommend'><div class='up'><a>{{ a_top_kr_name[0] }}</a><span class='up_bottom'><p>▲</p><a>{{ a_top_price[0] }}({{ a_top_before[0] }})</a></span></div><div class='down'><a>{{ a_bottom_kr_name[0] }}</a><span class='down_bottom'><p>▼</p><a>{{ a_bottom_price[0] }}({{ a_bottom_before[0] }})</a></span></div></div><div class='main_graph'><div style='width:99%;'><canvas id='canvas' style='height: 50vh; width: 40vw;'></canvas></div></div>";
                    new Chart(document.getElementById("canvas"), {
                        type: 'line',
                        data:{
                                labels: {{ t_xlabels | tojson }},
                                datasets: [{
                                        label: '{{ a_top_kr_name[0] }}',
                                        data: {{ t_dataset | tojson }},
                                        backgroundColor: 'rgb(255, 99, 132)',
                                        borderColor: 'rgb(255, 99, 132)',
                                        fill: false,
                                        lineTension: 0.3
                                    },{
                                        label: '{{ a_bottom_kr_name[0] }}',
                                        data: {{ b_dataset | tojson }},
                                        backgroundColor: 'rgb(115, 171, 255)',
                                        borderColor: 'rgb(51, 133, 255)',
                                        fill: false,
                                        lineTension: 0.3
                                    }]
                        },
                        options: {
                            responsive: false,
                            title: {
                                display: true,
                                text: ''
                            },
                            tooltips: {
                                mode: 'index',
                                intersect: false,
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true
                            },
                            scales: {
                                xAxes: [{
                                    display: true,
                                    scaleLabel: {
                                        display: true,
                                    }
                                }],
                                yAxes: [{
                                    display: true,
                                    ticks: {
                                    },
                                    scaleLabel: {
                                        display: true,
                                    }
                                }]
                            }
                        }
                    });
                }else if (value == 2) {
                    change_menu.innerHTML = "<div class='main_recommend'><div class='top_menubar'><div class='up_menu' onclick='menu_increase();'><a>Increase</a></div><div class='down_menu' onclick='menu_decrease();'><a>Decrease</a></div></div><div class='down_menubar'><ul id='menu_in_de'>{% for i in range(1,11) %}<li><div class='rank_value'><a>{{ i }}st</a></div><div class='name_value'><a>{{ t_top_kr_name[i -1] }} {{ t_top_price[i -1] }}({{ t_top_percent[i -1] }}%)</a></div><div class='more_value'><a>More></a></div></li>{% endfor %}</ul></div></div><div class='main_graph'><div style='width:99%;'><canvas id='canvas' style='height: 50vh; width: 40vw;'></canvas></div></div>";
                    new Chart(document.getElementById("canvas"), {
                        type: 'line',
                        data:{
                                labels: {{ t_xlabels | tojson }},
                                datasets: [{
                                        label: '{{ a_top_kr_name[0] }}',
                                        data: {{ t_dataset | tojson }},
                                        backgroundColor: 'rgb(255, 99, 132)',
                                        borderColor: 'rgb(255, 99, 132)',
                                        fill: false,
                                        lineTension: 0.3
                                    },{
                                        label: '{{ a_bottom_kr_name[0] }}',
                                        data: {{ b_dataset | tojson }},
                                        backgroundColor: 'rgb(115, 171, 255)',
                                        borderColor: 'rgb(51, 133, 255)',
                                        fill: false,
                                        lineTension: 0.3
                                    }]
                        },
                        options: {
                            responsive: false,
                            title: {
                                display: true,
                                text: ''
                            },
                            tooltips: {
                                mode: 'index',
                                intersect: false,
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true
                            },
                            scales: {
                                xAxes: [{
                                    display: true,
                                    scaleLabel: {
                                        display: true,
                                    }
                                }],
                                yAxes: [{
                                    display: true,
                                    ticks: {
                                    },
                                    scaleLabel: {
                                        display: true,
                                    }
                                }]
                            }
                        }
                    });
                }else if (value == 3) {
                    console.log("3번임");
                }else {
                    console.log("error!");
                };
            }
            
            function menu_increase() {
                var change_menu = document.getElementById("menu_in_de");
                change_menu.innerHTML = "<ul id='menu_in_de'>{% for i in range(1,11) %}<li><div class='rank_value'><a>{{ i }}st</a></div><div class='name_value'><a>{{ t_top_kr_name[i-1] }} {{ t_top_price[i-1] }}({{ t_top_percent[i-1] }}%)</a></div><div class='more_value'><a>More></a></div></li>{% endfor %}";
            }
            
            function menu_decrease() {
                var change_menu = document.getElementById("menu_in_de");
                change_menu.innerHTML = "<ul id='menu_in_de'>{% for i in range(1,11) %}<li><div class='rank_value'><a>{{ i }}st</a></div><div class='name_value'><a>{{ t_bottom_kr_name[i-1] }} {{ t_bottom_price[i-1] }}({{ t_bottom_percent[i-1] }}%)</a></div><div class='more_value'><a>More></a></div></li>{% endfor %}";
            }
        </script>
        <div class="main">
            <div class="menu">
                <div class="menu_bar">
                    <img alt="" src="{{ url_for('static', filename = '/new_image/index/menu_bar.png', v = 0.1) }}">
                </div>
                <div class="logo">
                    <img alt="" src="{{ url_for('static', filename = '/new_image/index/new_logo.png', v = 0.1) }}">
                </div>
                <div class="language">
                    <img alt="" src="{{ url_for('static', filename = '/new_image/index/kr.png', v = 0.1) }}">
                    <img alt="" src="{{ url_for('static', filename = '/new_image/index/en.png', v = 0.1) }}">
                </div>
            </div>
            <div class="content">
                <div class="date_bar">
                    <div class="day_input" onclick="today_value_open()">
                        <div class="day_menu">
                            <p>Day</p>
                            <img alt="" src="{{ url_for('static', filename = '/new_image/index/menu_bar_1.png', v = 0.1) }}">
                        </div>
                        <div class="day_value">
                            <a class="day_value_1" id="day_value_2"></a>
                            <a class="day_value_2" id="day_value_1"></a>
                        </div>
                    </div>
                    <div class="week_input">
                        <div class="week_menu">
                            <p>Week</p>
                            <img alt="" src="{{ url_for('static', filename = '/new_image/index/menu_bar_2.png', v = 0.1) }}">
                        </div>
                        <div class="week_value">
                            <p>rd</p>
                            <a class="week_value_1" id="week_value_2"></a>
                            <a class="week_value_2" id="week_value_1"></a>
                        </div>
                    </div>
                    <div class="month_input">
                        <div class="month_menu">
                            <p id="month_char">Month</p>
                            <img alt="" src="{{ url_for('static', filename = '/new_image/index/menu_bar_2.png', v = 0.1) }}">
                        </div>
                        <div class="month_value">
                            <p>th</p>
                            <a class="month_value_1" id="month_value_2"></a>
                            <a class="month_value_2" id="month_value_1"></a>
                        </div>
                    </div>
                </div>
                <div class="search_bar">
                    <div class="control_button">
                        <img alt="" src="{{ url_for('static', filename = '/new_image/index/search_bar.png', v = 0.1) }}">
                    </div>
                    <div class="search">
                        <input type="text" id="item_name" onkeypress="if(event.keyCode==13) {input_search(); return false;}" placeholder="검색" autocomplete="yes">
                        <img alt="" src="{{ url_for('static', filename = '/new_image/index/search.png', v = 0.1) }}" onclick="input_search()">
                    </div>
                </div>
                <div class="calender">
                    
                </div>
                <div class="main_bar">
                    <div class="first_menu">
                        <div class="main_top">
                            <div class="main_daily">
                                <a>Daily Search</a>
                                <p>2020-12-28</p>
                            </div>
                            <div class="main_menu">
                                <ul>
                                    <li id="menu_button_1" value=1 onclick="change_menu_button(value);">Most Fluctuation Item</li>
                                    <li id="menu_button_2" value=2 onclick="change_menu_button(value);">Daily Top 10</li>
                                    <li id="menu_button_3" value=3 onclick="change_menu_button(value);">Update</li>
                                </ul>
                            </div>
                            <div class="exit_button">
                                <img alt="" src="{{ url_for('static', filename = '/new_image/index/exit.png', v = 0.1) }}" onclick="today_value_exit()">
                            </div>
                        </div>
                        <div class="main_bottom" id="change_menu">
                            <div class="main_recommend">
                                <div class="up">
                                    <a>{{ a_top_kr_name[0] }}</a>
                                    <span class="up_bottom">
                                        <p>▲</p>
                                        <a>{{ a_top_price[0] }}({{ a_top_percent[0] }}%)</a>
                                    </span>
                                </div>
                                <div class="down">
                                    <a>{{ a_bottom_kr_name[0] }}</a>
                                    <span class="down_bottom">
                                        <p>▼</p>
                                        <a>{{ a_bottom_price[0] }}({{ a_bottom_percent[0] }}%)</a>
                                    </span>
                                </div>
                            </div>
                            <div class="main_graph">
                                <div style="width:99%;">
                                    <canvas id="canvas" style="height: 50vh; width: 40vw;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="second_menu">
                        
                    </div>
                    <div class="third_menu">
                        
                    </div>
                </div>
            </div>
        </div>
        <script>
            new Chart(document.getElementById("canvas"), {
                type: 'line',
                data:{
                        labels: {{ t_xlabels | tojson }},
                        datasets: [{
                                label: '{{ a_top_kr_name[0] }}',
                                data: {{ t_dataset | tojson }},
                                backgroundColor: 'rgb(255, 99, 132)',
                                borderColor: 'rgb(255, 99, 132)',
                                fill: false,
                                lineTension: 0.3
                            },{
                                label: '{{ a_bottom_kr_name[0] }}',
                                data: {{ b_dataset | tojson }},
                                backgroundColor: 'rgb(115, 171, 255)',
                                borderColor: 'rgb(51, 133, 255)',
                                fill: false,
                                lineTension: 0.3
                            }]
                },
                options: {
                    responsive: false,
                    title: {
                        display: true,
                        text: ''
                    },
                    tooltips: {
                        mode: 'index',
                        intersect: false,
                    },
                    hover: {
                        mode: 'nearest',
                        intersect: true
                    },
                    scales: {
                        xAxes: [{
                            display: true,
                            scaleLabel: {
                                display: true,
                            }
                        }],
                        yAxes: [{
                            display: true,
                            ticks: {
                            },
                            scaleLabel: {
                                display: true,
                            }
                        }]
                    }
                }
            });
        </script>
        <div class="footer">
            <div class="footer_content">
                <div class="info">
                    <a>자주묻는질문</a>
                    <a>문의</a>
                    <a>이용약관</a>
                    <a>기여</a>
                </div>
                <div class="icon">
                    <a><img alt="" src="{{ url_for('static', filename = '/new_image/index/discord.png', v = 0.1) }}">Discord</a>
                    <a><img alt="" src="{{ url_for('static', filename = '/new_image/index/patreon.png', v = 0.1) }}">Patreon</a>
                    <a><img alt="" src="{{ url_for('static', filename = '/new_image/index/twitter.png', v = 0.1) }}">Twitter</a>
                </div>
                <div class="ad">
                    광고
                </div>
                <div class="tos">
                    <p>면책조항</p>
                    <a>Digital Extremes Ltd, Warframe and the logo Warframe are registered trademarks. All rights are reserved worldwide. This site has no official link with Digital Extremes Ltd or Warframe. All artwork, screenshots, characters or other recognizable features of the intellectual property relating to these trademarks are likewise the intellectual property of Digital Extremes Ltd.</a>
                </div>
            </div>
        </div>
    </body>
</html>